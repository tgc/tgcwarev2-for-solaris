From f1afddaeb70d98047dc52c07b943b9d1c0282c4a Mon Sep 17 00:00:00 2001
From: "Tom G. Christensen" <tgc@jupiterrise.com>
Date: Wed, 27 Oct 2021 20:38:52 +0200
Subject: [PATCH 2/7] Include <sys/atomic.h> directly on Solaris

Only Solaris 10 has <atomic.h> and it is only a wrapper around
<sys/atomic.h>.
---
 crypto/threads_pthread.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/crypto/threads_pthread.c b/crypto/threads_pthread.c
index 9f00d8be5e..2792f82684 100644
--- a/crypto/threads_pthread.c
+++ b/crypto/threads_pthread.c
@@ -13,8 +13,8 @@
 #include <openssl/crypto.h>
 #include "internal/cryptlib.h"
 
-#if defined(__sun)
-# include <atomic.h>
+#if defined(__sun) || defined (sun)
+# include <sys/atomic.h>
 #endif
 
 #if defined(OPENSSL_THREADS) && !defined(CRYPTO_TDEBUG) && !defined(OPENSSL_SYS_WINDOWS)
-- 
2.27.0

